import React, { useCallback, useEffect, useState } from "react";
import { flatten, includes, isEmpty, isFunction } from "lodash";
import clsx from "clsx";
import sleep from "sleep-promise";

interface Props {
  onAnimationFinished?: () => void;
  disableAnim?: boolean;
}

const triangleGroups = {
  a: [1, 4, 7],
  b: [2, 5, 8],
  c: [3, 6, 9],
};

export default function GatesLoading({
  onAnimationFinished,
  disableAnim = false,
}: Props): React.ReactElement {
  const [visibleGroups, setVisibleGroups] = useState([]);
  const flattened = flatten(visibleGroups);

  const handleSelect = (selected, isSelected) => {
    if (isSelected || disableAnim) return;
    setVisibleGroups([...visibleGroups, triangleGroups[selected]]);
  };

  const handleFinish = useCallback(async () => {
    await sleep(1 * 1000);
    if (isFunction(onAnimationFinished)) onAnimationFinished();
  }, [onAnimationFinished]);

  useEffect(() => {
    if (!isEmpty(visibleGroups) && visibleGroups.length >= 3) handleFinish();
  }, [visibleGroups]);

  return (
    <>
      <style jsx>{`
        @keyframes fadeIn {
          0% {
            opacity: 0;
          }
          100% {
            opacity: 1;
          }
        }
        @keyframes dash {
          from {
            stroke-dashoffset: 4599.75537109375;
          }
          to {
            stroke-dashoffset: 0;
          }
        }
        .yellowPath {
          opacity: 0;
        }
        .yellowPath.visible {
          animation: fadeIn 1s linear forwards;
        }
        .circleSemi {
          opacity: 0;
        }
        .characterGroup:not(.disabled) {
          cursor: pointer;
        }
        .characterGroup:not(.disabled):hover > .circleSemi {
          opacity: 0.25;
        }
        .circle {
          opacity: 0;
        }
        .circle.visible {
          animation: fadeIn 1s linear forwards;
        }
      `}</style>
      <svg
        width="876"
        height="868"
        viewBox="0 0 876 868"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className={clsx("gate", { loading: !disableAnim })}
      >
        <path
          d="M259.002 655.6L437.802 720.7L616.602 655.6L711.702 490.8L678.702 303.4L532.902 181.1H342.702L196.902 303.4L163.902 490.8L259.002 655.6Z"
          stroke="#F2F2F2"
          strokeWidth="0.25"
          strokeMiterlimit="10"
        />
        <path
          d="M316.802 586.8L252.402 475.2L274.702 348.4L373.402 265.6H502.202L600.902 348.4L623.202 475.2L558.802 586.8L437.802 630.8L316.802 586.8Z"
          stroke="#F2F2F2"
          strokeWidth="0.25"
          strokeMiterlimit="10"
        />
        <path
          d="M437.801 360C536.936 360 617.301 279.635 617.301 180.5C617.301 81.3649 536.936 1 437.801 1C338.666 1 258.301 81.3649 258.301 180.5C258.301 279.635 338.666 360 437.801 360Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c1", {
            visible: includes(flattened, 1) || disableAnim,
          })}
        />
        <path
          d="M605.801 421.698C704.936 421.698 785.301 341.378 785.301 242.298C785.301 143.219 704.936 62.8984 605.801 62.8984C506.666 62.8984 426.301 143.219 426.301 242.298C426.301 341.378 506.666 421.698 605.801 421.698Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c2", {
            visible: includes(flattened, 2) || disableAnim,
          })}
        />

        <path
          d="M874.595 397.803C874.976 298.723 794.964 218.094 695.884 217.714C596.805 217.333 516.176 297.344 515.795 396.424C515.414 495.504 595.426 576.133 694.505 576.514C793.585 576.895 874.214 496.883 874.595 397.803Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c3", {
            visible: includes(flattened, 3) || disableAnim,
          })}
        />
        <path
          d="M664.406 752.6C763.485 752.489 843.716 672.08 843.606 573C843.495 473.92 763.085 393.689 664.005 393.8C564.925 393.91 484.695 474.32 484.806 573.4C484.916 672.48 565.326 752.71 664.406 752.6Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c4", {
            visible: includes(flattened, 4) || disableAnim,
          })}
        />
        <path
          d="M527.665 867.505C626.745 867.254 706.862 786.73 706.61 687.65C706.359 588.571 625.835 508.454 526.755 508.705C427.675 508.957 347.559 589.48 347.81 688.56C348.062 787.64 428.585 867.756 527.665 867.505Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c5", {
            visible: includes(flattened, 5) || disableAnim,
          })}
        />
        <path
          d="M527.77 688.374C527.902 589.294 447.689 508.866 348.609 508.734C249.529 508.602 169.102 588.815 168.97 687.895C168.838 786.975 249.051 867.402 348.13 867.534C447.21 867.667 527.638 787.453 527.77 688.374Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c6", {
            visible: includes(flattened, 6) || disableAnim,
          })}
        />
        <path
          d="M390.834 573.551C391.006 474.471 310.825 394.011 211.745 393.839C112.665 393.667 32.2059 473.848 32.0339 572.928C31.862 672.008 112.043 752.467 211.123 752.639C310.203 752.811 390.662 672.63 390.834 573.551Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c7", {
            visible: includes(flattened, 7) || disableAnim,
          })}
        />
        <path
          d="M180.4 576.499C279.48 576.499 359.8 496.179 359.8 397.099C359.8 298.019 279.48 217.699 180.4 217.699C81.3203 217.699 1 298.019 1 397.099C1 496.179 81.3203 576.499 180.4 576.499Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c8", {
            visible: includes(flattened, 8) || disableAnim,
          })}
        />
        <path
          d="M449.058 250.653C453.634 151.682 377.067 67.7386 278.041 63.1602C179.015 58.5818 95.0291 135.102 90.4533 234.073C85.8774 333.044 162.444 416.987 261.471 421.565C360.497 426.144 444.483 349.624 449.058 250.653Z"
          stroke="#F2F2F2"
          strokeWidth="0.5"
          strokeMiterlimit="10"
          className={clsx("circle c9", {
            visible: includes(flattened, 9) || disableAnim,
          })}
        />
        <path
          d="M664.4 573.1L528.6 488.2C517.7 481.4 512 468.6 514.3 456L514.4 455.6C516.6 442.9 526.3 432.9 538.9 430.2L695.5 396.8L537.4 419C524.7 420.8 512.1 414.7 505.7 403.5L505.3 402.8C498.9 391.7 499.8 377.7 507.8 367.6L606.1 241.7L499.4 360.1C490.8 369.7 477.2 373 465.2 368.6L464.3 368.3C452.2 363.9 444 352.6 443.6 339.8L438 180.5L432.4 339.8C431.9 352.7 423.7 363.9 411.7 368.3L410.8 368.6C398.7 373 385.2 369.6 376.6 360.1L269.9 241.7L368.2 367.6C376.1 377.7 377.1 391.7 370.7 402.8L370.3 403.5C363.9 414.6 351.3 420.8 338.6 419L180.5 396.8L337.1 430.2C349.7 432.9 359.4 442.9 361.6 455.6L361.7 456C363.9 468.7 358.3 481.4 347.4 488.2L211.6 573.1L353.4 497.8C364.8 491.8 378.6 493.2 388.5 501.5L388.6 501.6C398.5 509.9 402.3 523.3 398.3 535.5L348.7 688.2L409 539.2C413.8 527.3 425.4 519.5 438.3 519.5C451.2 519.5 462.7 527.3 467.6 539.2L527.9 688.2L478.3 535.5C474.3 523.3 478.2 509.9 488 501.6L488.1 501.5C498 493.2 511.8 491.8 523.2 497.8L664.4 573.1Z"
          fill="white"
        />
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.a) || disableAnim,
          })}
          onClick={() =>
            handleSelect("a", includes(visibleGroups, triangleGroups.a))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="438"
            cy="86"
            r="54"
            fill="white"
          />
          <path
            d="M447.1 73.3572C446.4 76.3572 446.1 79.2572 443.8 81.3572C441.7 83.3572 439.5 85.3572 437.4 87.4572C436.9 87.9572 436.3 88.5571 435.9 89.0571C434.3 90.9571 434.4 92.8572 435.8 94.4572C437.5 96.3572 439.2 98.3571 441 100.157C443.1 102.257 445 104.457 446.2 107.257C446.8 108.657 446.7 109.557 445.7 110.657C445.2 111.157 444.6 111.357 443.9 111.257C441 110.857 438.6 109.357 436.5 107.557C435 106.257 435.3 104.757 437 103.757C437.2 103.657 437.4 103.657 437.5 103.557C438.7 102.957 438.8 102.457 438.1 101.357C437.3 100.257 436.5 99.1571 435.6 98.0571C433.6 95.4571 431.5 92.7571 429.5 90.1571C429.2 89.8571 429 89.4571 428.8 89.0571C428.4 88.4571 428.5 87.9571 429 87.5571C429.4 87.1571 429.9 86.6572 430.4 86.2572C432 84.9572 433.6 83.6572 435.2 82.2572C436.2 81.3572 436.2 80.4571 435.1 79.6571C433.9 78.6571 432.7 77.6572 431.4 76.7572C427.7 74.0572 427.4 69.6571 428.7 66.1571C429.3 64.6571 430.1 63.3572 431.4 62.3572C433.1 61.1572 435.1 60.8571 437.1 61.0571C441.7 61.6571 444.3 64.8572 445.9 68.8572C446.4 70.3572 446.7 71.9572 447.1 73.3572ZM442.9 70.4572C442.8 68.0572 442 66.6571 440.4 65.6571C439.6 65.1571 438.8 65.1571 437.9 65.5571C435.9 66.6571 434.4 68.1572 433.4 70.2572C432.9 71.4572 432.8 72.5571 433.4 73.6571C433.8 74.3571 434 75.1572 434.4 75.8572C435 76.7572 435.8 77.6572 436.6 78.3572C437.3 78.9572 438.2 78.7571 438.8 78.0571C439.7 76.9571 440.6 75.8571 441.2 74.6571C442 73.1571 442.5 71.5572 442.9 70.4572Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.b) || disableAnim,
          })}
          onClick={() =>
            handleSelect("b", includes(visibleGroups, triangleGroups.b))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="665.656"
            cy="169.077"
            r="54"
            transform="rotate(40 665.656 169.077)"
            fill="white"
          />
          <path
            d="M673.896 145.21C675.896 146.41 676.996 148.41 678.296 150.11C679.096 151.21 679.496 152.71 679.696 154.11C679.896 156.61 680.196 159.21 679.796 161.61C678.896 167.61 673.696 172.01 667.296 171.81C665.696 171.81 664.196 171.61 662.596 171.51C660.596 171.41 660.196 171.71 659.796 173.61C659.096 177.01 659.396 180.31 659.496 183.71C659.596 186.41 659.696 189.21 659.496 191.91C659.396 193.41 658.896 194.81 658.596 196.31C658.396 197.11 657.896 197.31 657.196 197.11C654.796 196.41 653.296 194.81 653.796 192.31C654.796 186.81 655.496 181.21 656.396 175.61C656.596 174.21 657.196 172.81 656.996 171.41C656.796 170.31 656.696 169.21 655.496 168.71C652.096 167.31 650.996 161.61 652.996 158.31C653.396 157.71 653.796 157.21 654.196 156.61C655.296 155.21 656.596 154.81 658.296 155.21C659.996 155.61 660.796 156.71 661.096 158.31C661.396 159.81 661.496 161.31 661.696 162.81C661.796 164.31 662.496 165.11 663.996 165.21C665.896 165.31 667.796 165.01 669.496 164.11C669.896 163.91 670.296 163.61 670.696 163.51C672.996 163.01 674.496 161.51 675.896 159.71C677.496 157.61 677.096 155.01 674.896 153.51C672.696 152.01 670.296 150.71 667.696 150.01C666.596 149.71 665.596 149.31 664.596 148.81C663.496 148.21 662.896 147.21 662.996 145.91C663.096 144.61 663.096 143.31 663.196 142.01C663.296 140.41 664.196 139.71 665.696 140.11C666.396 140.31 667.096 140.71 667.696 141.11C668.496 141.51 669.196 142.11 669.896 142.51C671.196 143.41 672.496 144.31 673.896 145.21Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.c) || disableAnim,
          })}
          onClick={() =>
            handleSelect("c", includes(visibleGroups, triangleGroups.c))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="787.197"
            cy="379.557"
            r="54"
            transform="rotate(80 787.197 379.557)"
            fill="white"
          />
          <path
            d="M807.296 359C808.596 359.6 809.596 360.4 810.096 361.6C810.796 363.4 811.496 365.2 812.196 367C813.496 370 812.896 373 811.896 375.8C810.596 379.1 808.796 382.1 805.596 384C802.896 385.6 800.096 385.6 797.596 383.7C797.396 383.5 797.196 383.4 796.996 383.2C795.796 382.4 795.396 382.4 794.496 383.6C793.296 385.3 791.796 386.5 790.196 387.7C787.396 389.9 784.496 389.5 781.496 388.3C780.496 387.9 779.596 387.1 778.696 386.4C777.296 385.2 776.796 385.1 775.696 386.6C773.296 389.9 770.996 393.3 768.696 396.6C768.196 397.4 767.596 398.1 766.996 398.8C766.196 399.8 765.096 400 764.196 399.5C763.196 398.9 762.696 397.6 763.196 396.4C764.096 394 765.896 392.2 767.696 390.4C769.796 388.3 771.896 386.1 773.996 384C775.196 382.9 775.496 381.6 774.996 380.1C774.296 377.9 774.796 375.9 775.596 373.9C776.296 372.2 777.696 370.9 779.096 369.8C780.496 368.7 782.296 368.7 783.896 369.2C786.196 369.9 787.096 373.5 785.596 375.6C785.296 376.1 784.796 376.4 784.496 376.9C782.796 379 783.296 381.6 785.796 382.7C788.296 383.8 790.696 383.7 792.796 381.8C793.996 380.7 794.196 379.8 793.596 378.3C792.996 376.9 792.396 375.4 791.796 374C791.396 373.1 791.596 372.4 792.096 371.7C792.996 370.5 793.896 369.3 794.896 368.2C795.796 367.2 796.596 367.4 796.896 368.7C797.296 370.1 797.496 371.5 797.696 373C798.096 375.8 799.896 377.5 802.296 378.7C802.696 378.9 803.096 379 803.496 379.1C805.796 379.9 807.996 378.5 808.096 376.1C808.196 373.4 807.196 371 805.596 368.8C804.796 367.7 804.196 366.5 803.496 365.3C803.096 364.6 803.096 363.8 803.596 363.2C804.796 361.7 806.096 360.4 807.296 359Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.a) || disableAnim,
          })}
          onClick={() =>
            handleSelect("a", includes(visibleGroups, triangleGroups.a))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="746.235"
            cy="618.765"
            r="54"
            transform="rotate(120 746.235 618.765)"
            fill="white"
          />
          <path
            d="M747.201 635.52C742.701 633.22 741.001 629.42 740.301 625.12C739.901 623.12 739.801 621.02 739.401 619.02C739.101 616.92 738.401 616.52 736.601 617.52C732.801 619.62 728.901 619.52 725.001 617.82C723.601 617.22 722.401 615.82 721.501 614.52C719.201 611.02 719.401 605.92 723.101 602.92C724.701 601.62 726.601 600.42 728.601 599.72C732.701 598.32 736.801 599.02 740.401 601.32C742.101 602.42 742.901 604.32 743.501 606.12C743.801 606.92 743.901 607.82 744.101 608.72C744.401 610.22 745.101 610.52 746.501 609.92C747.901 609.32 749.201 608.62 750.701 608.22C753.501 607.42 756.301 606.82 759.101 606.22C760.101 606.02 761.101 606.12 762.101 606.22C767.101 606.72 770.101 609.42 771.401 614.42C772.401 618.32 769.001 621.62 765.101 620.52C764.701 620.42 764.301 620.02 764.201 619.72C763.901 618.82 763.701 617.92 763.401 617.02C763.101 615.92 762.901 614.72 762.401 613.62C761.501 611.52 759.901 610.42 757.601 610.12C754.501 609.72 751.501 610.42 748.601 611.52C748.001 611.82 747.401 612.12 746.701 612.42C744.501 613.52 744.401 613.62 744.701 616.12C745.001 618.12 745.301 620.22 745.501 622.22C745.801 625.32 747.101 628.02 748.701 630.62C750.201 633.02 753.601 634.62 757.501 633.32C758.201 633.12 758.901 632.92 759.701 632.92C760.601 632.92 761.201 633.62 761.201 634.52C761.301 635.32 760.601 635.62 760.101 635.82C757.101 636.72 754.101 637.62 750.901 637.02C749.701 636.82 748.201 636.42 747.201 635.52ZM734.301 603.62C732.701 602.62 730.101 602.52 728.801 603.62C727.201 604.92 726.601 606.62 727.101 608.62C727.301 609.42 727.501 610.22 727.801 610.92C729.201 614.42 732.401 616.02 736.001 614.92C737.801 614.42 738.601 613.22 738.301 611.42C738.101 610.32 737.901 609.22 737.401 608.22C736.701 606.52 736.001 604.72 734.301 603.62Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.b) || disableAnim,
          })}
          onClick={() =>
            handleSelect("b", includes(visibleGroups, triangleGroups.b))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="558.788"
            cy="773.726"
            r="54"
            transform="rotate(160 558.788 773.726)"
            fill="white"
          />
          <path
            d="M579.688 780.006C579.788 780.606 579.988 781.206 579.988 781.806C580.088 785.106 581.288 787.906 583.488 790.206C583.988 790.806 584.888 791.306 584.488 792.206C584.088 793.306 582.988 793.006 582.188 792.906C580.188 792.706 578.089 792.506 576.089 791.906C573.789 791.306 572.888 789.906 572.788 787.506C572.688 785.106 572.689 782.806 572.589 780.406C572.489 777.206 568.988 773.706 565.188 775.206C563.988 775.706 562.888 776.006 561.988 777.106C560.288 779.206 559.888 781.606 561.288 783.906C562.888 786.506 561.089 789.706 559.389 790.806C558.989 791.106 558.288 791.306 557.788 791.206C554.788 790.606 551.888 789.806 550.688 786.506C549.888 784.506 549.488 782.406 550.488 780.306C550.788 779.606 551.188 778.906 551.488 778.306C551.988 777.206 551.989 777.006 551.089 776.206C549.189 774.606 547.389 773.006 545.589 771.406C543.489 769.706 541.488 768.006 539.288 766.306C537.488 764.906 535.988 763.206 535.288 761.006C534.888 759.806 534.889 758.706 535.389 757.506C536.189 755.806 537.488 755.506 538.788 756.806C539.688 757.706 540.588 758.706 541.188 759.906C542.588 762.506 544.688 764.606 546.688 766.806C548.888 769.306 551.388 771.606 553.788 774.006C554.688 774.906 554.988 774.906 555.788 774.106C557.088 772.606 558.988 771.906 560.788 771.706C564.588 771.206 568.489 771.206 572.089 772.706C575.689 774.206 578.288 776.506 579.688 780.006Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.c) || disableAnim,
          })}
          onClick={() =>
            handleSelect("c", includes(visibleGroups, triangleGroups.c))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="315.726"
            cy="773.788"
            r="54"
            transform="rotate(-160 315.726 773.788)"
            fill="white"
          />
          <path
            d="M314.3 782.406C315.7 782.606 317.1 782.906 318.5 783.006C321.5 783.206 323.6 781.506 325.4 779.406C326.9 777.706 326.8 776.006 325.5 774.106C324.5 772.606 323.3 771.606 321.3 771.806C320.1 772.006 319.2 772.506 318.7 773.606C317.3 776.506 313.4 776.806 311.6 774.106C310.3 772.206 309.5 770.306 310.6 768.006C311 767.106 311.6 766.406 312.5 766.106C313.3 765.806 314.2 765.506 315 765.306C316.5 764.806 316.9 764.506 316.7 762.906C316.5 761.006 316 759.206 315.7 757.406C315.2 754.906 314.7 752.506 314.1 750.106C313.8 748.706 314.3 747.606 315.5 747.206C316.9 746.706 317.9 747.106 318.6 748.506C319.1 749.606 319.4 750.806 319.5 751.906C319.6 753.706 319.5 755.506 319.5 757.306C319.6 759.606 319.7 761.906 319.8 764.206C319.9 765.106 320.3 765.906 321.2 766.206C324.8 767.306 326.5 770.206 328 773.306C328.8 775.106 329.3 777.106 329.8 779.006C330.4 781.606 328.8 785.106 326.6 786.506C325.9 786.906 325.2 787.306 324.5 787.706C323 788.506 322.8 789.006 323.5 790.506C323.9 791.506 324.4 792.606 324.6 793.706C325.2 796.406 324.5 798.906 322.5 800.806C321.5 801.706 319.9 802.306 318.4 802.506C315 803.106 311.7 802.506 308.7 800.506C308.2 800.206 307.7 799.906 307.2 799.806C305.4 799.506 304.7 798.106 304.3 796.706C304 795.506 304 794.106 304 792.806C304 791.606 305.5 791.006 306.6 791.606C306.9 791.806 307.1 792.006 307.3 792.206C308.2 794.006 310.1 794.706 311.6 795.706C313.5 796.906 317.5 796.406 319.3 794.906C320.5 793.906 321 792.506 320.9 790.906C320.8 789.706 320 789.006 318.6 788.706C316.8 788.306 314.9 787.906 313.1 787.606C312 787.406 311.4 786.906 311.2 785.906C311 785.206 310.8 784.406 310.5 783.706C310.2 782.806 310.3 782.106 311 781.506C311.6 780.906 312.4 781.106 313.1 781.506C313.5 781.706 313.9 781.906 314.3 782.106C314.3 782.306 314.3 782.406 314.3 782.406Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.a) || disableAnim,
          })}
          onClick={() =>
            handleSelect("a", includes(visibleGroups, triangleGroups.a))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="130.765"
            cy="619.235"
            r="54"
            transform="rotate(-120 130.765 619.235)"
            fill="white"
          />
          <path
            d="M124.743 599.9C125.943 599.4 127.543 598.3 129.143 598.2C131.943 598.1 134.843 597.6 137.643 598.7C140.643 599.9 143.043 602 144.343 605C146.343 609.5 146.543 614.1 144.543 618.8C142.643 623 140.043 626.6 137.143 630.1C135.343 632.3 133.143 634 131.043 635.9C130.243 636.6 129.443 637.3 128.543 637.9C127.843 638.3 127.043 638.8 126.343 638.1C125.843 637.7 126.043 636.3 126.643 635.5C126.943 635.2 127.243 634.9 127.643 634.6C130.643 632.7 132.843 630 135.243 627.4C137.143 625.2 138.543 622.8 139.843 620.1C140.743 618.2 141.043 616.3 140.943 614.3C140.843 610.8 139.543 607.9 136.443 605.9C134.243 604.5 131.843 604 129.243 604.2C128.443 604.3 128.343 604.8 128.443 605.4C128.543 605.9 128.843 606.4 129.143 606.9C131.343 610.2 131.643 614 131.343 617.8C131.043 621.6 127.443 624.7 123.543 624.9C121.043 625 119.443 623.7 117.843 622.1C116.043 620.3 114.743 618.2 115.043 615.4C115.143 614.4 115.043 613.4 115.043 612.4C115.043 610.3 115.643 608.5 116.643 606.7C117.543 605 118.743 603.8 120.343 602.9C121.843 602.1 123.043 601.1 124.743 599.9ZM118.443 615.2C119.443 616.7 120.843 617.2 122.643 617.3C124.243 617.4 125.343 616.9 126.043 615.5C126.343 614.9 126.743 614.4 126.943 613.9C127.443 612.8 127.943 611.6 127.643 610.3C127.443 609.3 127.143 608.4 126.943 607.4C126.543 606.1 126.143 605.9 124.943 606.1C121.743 606.7 119.643 608.6 118.343 611.5C117.643 612.9 117.943 614.1 118.443 615.2Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.b) || disableAnim,
          })}
          onClick={() =>
            handleSelect("b", includes(visibleGroups, triangleGroups.b))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="88.5566"
            cy="379.197"
            r="54"
            transform="rotate(-80 88.5566 379.197)"
            fill="white"
          />
          <path
            d="M69 366.263C69.6 364.163 71 362.763 72.3 361.363C72.8 360.863 73.5 360.863 74 361.463C74.3 361.763 74.5 362.063 74.7 362.363C77.5 367.263 80.4 372.263 83.2 377.163C84.7 379.863 86.3 382.563 87.7 385.463C88.9 387.863 90.8 389.363 92.8 390.863C93.8 391.663 95.1 391.563 96.2 391.263C99 390.463 100.9 388.363 101.7 385.763C102.3 383.663 101.9 381.263 100.4 379.363C99.5001 378.263 98.5001 377.163 97.6001 376.063C96.0001 374.263 95.7 372.963 96.7 370.763C97.4 369.263 98.1 367.663 99.7 366.763C101 366.063 102.4 365.963 103.3 367.363C104.1 368.663 105.2 369.763 105.9 371.063C106.6 372.363 107 373.863 107.3 375.263C107.6 376.963 107.6 378.663 107.7 380.363C107.7 380.563 107.7 380.863 107.6 381.063C106.5 383.663 105.7 386.363 104.3 388.863C102.8 391.463 100.6 393.563 98.2 395.363C96.6 396.463 95.0001 397.263 93.1001 397.563C92.6001 397.663 92.1001 397.763 91.6001 397.863C87.2001 398.663 87.1001 398.563 84.6001 394.363C81.3001 388.763 78.4 382.963 75 377.363C73.3 374.563 71.7001 371.763 70.1001 368.963C69.5001 368.063 69.3 367.063 69 366.263Z"
            fill="white"
            className="character"
          />
        </g>
        <g
          className={clsx("characterGroup", {
            disabled: includes(visibleGroups, triangleGroups.c) || disableAnim,
          })}
          onClick={() =>
            handleSelect("c", includes(visibleGroups, triangleGroups.c))
          }
        >
          <circle
            className="circleSemi"
            opacity="0.25"
            cx="210.077"
            cy="168.656"
            r="54"
            transform="rotate(-40 210.077 168.656)"
            fill="white"
          />
          <path
            d="M187.9 156.305C191.2 152.905 195.3 152.705 199.5 153.205C201.5 153.505 203.6 153.805 205.1 155.505C205.9 156.405 206.7 157.305 207.4 158.205C210.1 161.605 209.9 167.305 205.4 170.405C204.8 170.805 204.2 171.505 203.9 172.205C203.4 173.305 203.9 173.905 205.1 173.905C207 173.905 208.9 173.905 210.7 173.805C215.4 173.505 220.1 173.505 224.8 174.005C226.7 174.205 228.6 174.305 230.4 174.805C233.5 175.605 235.3 177.905 236.6 180.705C237.6 183.005 236 185.605 233.5 185.805C232 185.905 230.4 185.605 228.8 185.405C227.8 185.305 227.5 184.605 227.5 183.605C227.5 183.205 227.6 182.905 227.6 182.505C227.9 180.005 226.7 178.105 224.3 177.405C221.1 176.505 217.7 176.705 214.4 176.705C211 176.705 207.5 176.805 204.1 176.805C201.3 176.805 198.6 176.805 195.8 176.805C192.4 176.705 189.5 175.405 186.9 173.305C184.1 170.905 183 167.705 183 164.205C183 161.205 184.8 159.105 186.8 157.205C187.2 156.805 187.6 156.505 187.9 156.305ZM199.4 158.805C199.2 158.605 198.8 158.105 198.5 157.705C197.3 156.005 195.6 156.005 194 156.405C192.4 156.805 191.1 157.805 190.7 159.405C190 162.505 190.2 165.505 192.1 168.205C193 169.505 194.1 170.805 195.3 171.905C197.6 174.105 200.3 173.505 201.4 170.505C202.9 166.405 202.8 162.405 199.4 158.805Z"
            fill="white"
            className="character"
          />
        </g>
        <path
          d="M665 574L438 181L211 574H665Z"
          stroke="#FFB84F"
          strokeWidth="3"
          className={clsx("yellowPath", {
            visible: includes(visibleGroups, triangleGroups.a),
          })}
        />
        <path
          d="M527.044 689.029L605.768 242.061L179.26 397.204L527.044 689.029Z"
          stroke="#FFB84F"
          strokeWidth="3"
          className={clsx("yellowPath", {
            visible: includes(visibleGroups, triangleGroups.b),
          })}
        />
        <path
          d="M347.423 688.471L695.035 396.676L268.587 241.369L347.423 688.471Z"
          stroke="#FFB84F"
          strokeWidth="3"
          className={clsx("yellowPath", {
            visible: includes(visibleGroups, triangleGroups.c),
          })}
        />
        <path
          d="M437.802 493.699C461.002 493.699 480.601 478.699 487.701 457.899C489.201 453.499 490.102 448.899 490.402 444.099C490.502 443.099 490.501 441.999 490.501 440.899C490.501 411.799 466.902 388.199 437.802 388.199C408.702 388.199 385.102 411.799 385.102 440.899C385.102 457.799 393.002 472.799 405.402 482.399C411.802 487.399 419.402 490.999 427.802 492.599C431.002 493.399 434.402 493.699 437.802 493.699Z"
          fill="#010202"
        />
        <path
          d="M437.802 403.5L441.902 416.1C443.102 419.8 447.502 421.4 450.802 419.3L462.002 412.3L457.002 424.5C455.502 428.1 457.902 432.2 461.702 432.7L474.802 434.5L463.102 440.7C459.602 442.5 458.802 447.1 461.502 450L470.402 459.8L457.502 457C453.702 456.2 450.102 459.2 450.202 463.1L450.702 476.3L442.602 465.9C440.202 462.8 435.502 462.8 433.102 465.9L425.002 476.3L425.502 463.1C425.602 459.2 422.102 456.2 418.202 457L405.302 459.8L414.202 450C416.802 447.1 416.002 442.5 412.602 440.7L400.902 434.5L414.002 432.7C417.902 432.2 420.202 428.1 418.702 424.5L413.702 412.3L424.902 419.3C428.202 421.4 432.602 419.8 433.802 416.1L437.802 403.5Z"
          fill="white"
        />
        <path
          d="M449.202 180.5C449.202 186.8 444.102 191.9 437.802 191.9C431.502 191.9 426.402 186.8 426.402 180.5C426.402 174.2 431.502 169.1 437.802 169.1C444.102 169.1 449.202 174.2 449.202 180.5Z"
          fill="white"
        />
        <path
          d="M278.5 234.9C282.6 239.7 281.9 246.9 277.1 251C272.3 255.1 265.1 254.4 261 249.6C256.9 244.8 257.6 237.6 262.4 233.5C267.3 229.5 274.5 230.1 278.5 234.9Z"
          fill="white"
        />
        <path
          d="M697.199 408.4C690.999 409.5 685.099 405.3 683.999 399.1C682.899 392.9 687.099 387 693.299 385.9C699.499 384.8 705.399 389 706.499 395.2C707.599 401.4 703.399 407.3 697.199 408.4Z"
          fill="white"
        />
        <path
          d="M614.602 249.6C610.502 254.4 603.302 255.1 598.502 251C593.702 246.9 593.002 239.7 597.102 234.9C601.202 230.1 608.402 229.4 613.202 233.5C618.002 237.6 618.602 244.8 614.602 249.6Z"
          fill="white"
        />
        <path
          d="M658.5 583.1C653 579.9 651.2 573 654.3 567.5C657.5 562 664.4 560.2 669.9 563.3C675.4 566.5 677.2 573.4 674.1 578.9C670.9 584.4 663.9 586.3 658.5 583.1Z"
          fill="white"
        />
        <path
          d="M516.502 692C514.302 686.1 517.402 679.5 523.302 677.4C529.202 675.2 535.802 678.301 537.902 684.201C540.102 690.101 537.002 696.701 531.102 698.801C525.202 701.001 518.602 698 516.502 692Z"
          fill="white"
        />
        <path
          d="M337.701 684.201C339.901 678.301 346.401 675.2 352.301 677.4C358.201 679.6 361.301 686.1 359.101 692C356.901 697.9 350.401 701.001 344.501 698.801C338.601 696.701 335.501 690.201 337.701 684.201Z"
          fill="white"
        />
        <path
          d="M205.701 563.3C211.201 560.1 218.201 562 221.301 567.5C224.501 573 222.601 580 217.101 583.1C211.601 586.3 204.601 584.4 201.501 578.9C198.401 573.5 200.301 566.5 205.701 563.3Z"
          fill="white"
        />
        <path
          d="M182.403 385.901C188.603 387.001 192.802 392.901 191.702 399.101C190.602 405.301 184.702 409.501 178.502 408.401C172.302 407.301 168.102 401.401 169.202 395.201C170.202 388.901 176.203 384.801 182.403 385.901Z"
          fill="white"
        />
      </svg>
    </>
  );
}
